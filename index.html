<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sangin Snoop</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            background: #0d1117;
            color: #c9d1d9;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        h1 {
            color: #58a6ff;
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .subtitle {
            color: #8b949e;
            margin-bottom: 30px;
        }

        .badge {
            display: inline-block;
            background: #21262d;
            border: 1px solid #30363d;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 12px;
            margin-right: 8px;
            margin-bottom: 20px;
        }

        h2 {
            color: #c9d1d9;
            font-size: 1.25rem;
            margin: 30px 0 15px 0;
            padding-bottom: 8px;
            border-bottom: 1px solid #21262d;
        }

        p {
            margin-bottom: 15px;
            color: #8b949e;
        }

        a {
            color: #58a6ff;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        .btn {
            display: inline-block;
            background: #238636;
            color: #fff;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 500;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            background: #2ea043;
            text-decoration: none;
        }

        .btn-secondary {
            background: #21262d;
            border: 1px solid #30363d;
        }

        .btn-secondary:hover {
            background: #30363d;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .watch-card {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .watch-card:hover {
            border-color: #58a6ff;
        }

        .watch-name {
            color: #c9d1d9;
            font-weight: 500;
            font-size: 14px;
        }

        .watch-name a {
            color: inherit;
        }

        .status-badge {
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 500;
        }

        .status-available {
            background: rgba(63, 185, 80, 0.2);
            color: #3fb950;
        }

        .status-sold-out {
            background: rgba(248, 81, 73, 0.2);
            color: #f85149;
        }

        .status-unknown {
            background: rgba(139, 148, 158, 0.2);
            color: #8b949e;
        }

        .last-updated {
            color: #6e7681;
            font-size: 13px;
            margin-bottom: 15px;
        }

        .loading {
            color: #8b949e;
            font-style: italic;
        }

        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 15px 20px;
            text-align: center;
        }

        .stat-number {
            font-size: 24px;
            font-weight: 600;
            color: #c9d1d9;
        }

        .stat-label {
            font-size: 12px;
            color: #8b949e;
        }

        .stat-number.green { color: #3fb950; }
        .stat-number.red { color: #f85149; }

        footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 1px solid #21262d;
            color: #6e7681;
            font-size: 14px;
        }

        code {
            background: #161b22;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'SF Mono', Consolas, monospace;
            font-size: 0.9em;
        }

        pre {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 16px;
            overflow-x: auto;
            margin-bottom: 20px;
        }

        pre code {
            background: none;
            padding: 0;
            color: #c9d1d9;
        }

        .comment { color: #8b949e; }
        .command { color: #79c0ff; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Sangin Snoop</h1>
        <p class="subtitle">Watch availability checker for Sangin Instruments</p>

        <span class="badge">Python</span>
        <span class="badge">Auto-discovery</span>
        <span class="badge">Discord alerts</span>

        <p>Monitors <a href="https://sangininstruments.com">Sangin Instruments</a> for watch availability. Automatically discovers all products and alerts you via Discord when watches come back in stock.</p>

        <div>
            <a href="https://github.com/arandomguyhere/Sangin-Snoop" class="btn">View on GitHub</a>
            <a href="https://github.com/arandomguyhere/Sangin-Snoop/fork" class="btn btn-secondary">Fork</a>
        </div>

        <h2>Live Status</h2>
        <p class="last-updated" id="last-updated">Loading...</p>

        <div class="stats" id="stats">
            <div class="stat">
                <div class="stat-number" id="total-count">-</div>
                <div class="stat-label">Total Watches</div>
            </div>
            <div class="stat">
                <div class="stat-number green" id="available-count">-</div>
                <div class="stat-label">Available</div>
            </div>
            <div class="stat">
                <div class="stat-number red" id="soldout-count">-</div>
                <div class="stat-label">Sold Out</div>
            </div>
        </div>

        <div class="status-grid" id="status-grid">
            <p class="loading">Loading watch data...</p>
        </div>

        <h2>Quick start</h2>
        <pre><code><span class="comment"># Clone and run</span>
<span class="command">git clone https://github.com/arandomguyhere/Sangin-Snoop.git</span>
<span class="command">cd Sangin-Snoop</span>
<span class="command">pip install -r requirements.txt</span>
<span class="command">python Sanginsnoop.py</span></code></pre>

        <h2>Setup Discord alerts</h2>
        <ol style="margin-left: 20px; color: #8b949e;">
            <li style="margin-bottom: 8px;">Fork this repo</li>
            <li style="margin-bottom: 8px;">Create a Discord webhook (Server Settings → Integrations → Webhooks)</li>
            <li style="margin-bottom: 8px;">Add <code>DISCORD_WEBHOOK_URL</code> to your repo's secrets</li>
            <li style="margin-bottom: 8px;">The workflow runs every 30 minutes automatically</li>
        </ol>

        <footer>
            <p>Not affiliated with Sangin Instruments. Built by <a href="https://github.com/arandomguyhere">@arandomguyhere</a></p>
        </footer>
    </div>

    <script>
        async function loadStatus() {
            try {
                const response = await fetch('status.json');
                if (!response.ok) throw new Error('Status not available');
                const data = await response.json();

                // Update last updated time
                const updated = new Date(data.last_updated);
                document.getElementById('last-updated').textContent =
                    `Last updated: ${updated.toLocaleString()}`;

                // Count stats
                const available = data.products.filter(p => p.status === 'available').length;
                const soldOut = data.products.filter(p => p.status === 'sold out').length;

                document.getElementById('total-count').textContent = data.total_products;
                document.getElementById('available-count').textContent = available;
                document.getElementById('soldout-count').textContent = soldOut;

                // Build grid
                const grid = document.getElementById('status-grid');
                grid.innerHTML = data.products.map(product => {
                    let statusClass = 'status-unknown';
                    let statusText = product.status;

                    if (product.status === 'available') {
                        statusClass = 'status-available';
                        statusText = 'Available';
                    } else if (product.status === 'sold out') {
                        statusClass = 'status-sold-out';
                        statusText = 'Sold Out';
                    }

                    return `
                        <div class="watch-card">
                            <span class="watch-name">
                                <a href="${product.url}" target="_blank">${product.name}</a>
                            </span>
                            <span class="status-badge ${statusClass}">${statusText}</span>
                        </div>
                    `;
                }).join('');

            } catch (error) {
                document.getElementById('status-grid').innerHTML =
                    '<p class="loading">Status data not yet available. Run the script or wait for the next GitHub Action.</p>';
                document.getElementById('last-updated').textContent = 'Status not yet available';
            }
        }

        loadStatus();
    </script>
</body>
</html>
